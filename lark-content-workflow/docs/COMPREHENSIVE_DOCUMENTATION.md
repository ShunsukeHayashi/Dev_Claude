# ğŸ—ï¸ Lark Base Ã— note.com è¨˜äº‹ä½œæˆãƒ»æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ 
## åŒ…æ‹¬çš„è¨­è¨ˆãƒ»é–‹ç™ºãƒ»é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ v2.0

*æœ€çµ‚æ›´æ–°: 2025-08-11*  
*ä½œæˆè€…: ã‚·ãƒ¥ãƒ³ã‚¹ã‚±å¼ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒãƒ¼ãƒ *

---

## ğŸ“‘ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆ

| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | å†…å®¹ | å¯¾è±¡è€… |
|-----------|------|-------|
| [1. æ¦‚è¦ãƒ»èƒŒæ™¯](#1-æ¦‚è¦èƒŒæ™¯) | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®çš„ã¨ãƒ“ã‚¸ãƒ§ãƒ³ | å…¨ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ |
| [2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#2-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£) | æŠ€è¡“æ§‹æˆã¨è¨­è¨ˆæ€æƒ³ | é–‹ç™ºè€…ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ |
| [3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#3-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ) | Lark Baseæ§‹é€ ã¨ERå›³ | é–‹ç™ºè€…ãƒ»ãƒ‡ãƒ¼ã‚¿ç®¡ç†è€… |
| [4. APIä»•æ§˜æ›¸](#4-apiä»•æ§˜æ›¸) | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ« | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»çµ±åˆé–‹ç™ºè€… |
| [5. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ](#5-ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ) | æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹ã¨ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç† | æ¥­å‹™æ‹…å½“è€…ãƒ»é–‹ç™ºè€… |
| [6. å®Ÿè£…ã‚¬ã‚¤ãƒ‰](#6-å®Ÿè£…ã‚¬ã‚¤ãƒ‰) | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨é–‹ç™ºæ‰‹é † | é–‹ç™ºè€…ãƒ»DevOps |
| [7. é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](#7-é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«) | æ—¥å¸¸é‹ç”¨ã¨ç›£è¦– | é‹ç”¨ãƒãƒ¼ãƒ  |
| [8. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#8-ãƒ†ã‚¹ãƒˆæˆ¦ç•¥) | å“è³ªä¿è¨¼ã¨ãƒ†ã‚¹ãƒˆæ‰‹é † | QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ |
| [9. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#9-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£) | èªè¨¼ãƒ»èªå¯ãƒ»ãƒ‡ãƒ¼ã‚¿ä¿è­· | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ  |
| [10. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹](#10-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹) | æ€§èƒ½è¦ä»¶ã¨æœ€é©åŒ– | ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ |

---

## 1. æ¦‚è¦ãƒ»èƒŒæ™¯

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèƒŒæ™¯

**è§£æ±ºã™ã‚‹èª²é¡Œ:**
```yaml
ç¾çŠ¶ã®å•é¡Œ:
  - note.comè¨˜äº‹ä½œæˆãƒ—ãƒ­ã‚»ã‚¹ã®å±äººåŒ–ã¨éåŠ¹ç‡æ€§
  - SEOæœ€é©åŒ–ä½œæ¥­ã®è¤‡é›‘æ€§ã¨æ™‚é–“ã‚³ã‚¹ãƒˆ
  - å“è³ªç®¡ç†ã®ä¸çµ±ä¸€ã¨ãƒãƒ©ãƒ„ã‚­
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã®è¤‡é›‘æ€§
  - ãƒãƒ¼ãƒ å”æ¥­ã®å¯è¦–æ€§ä¸è¶³

ç›®æ¨™æˆæœ:
  - ä½œæ¥­æ™‚é–“ã‚’60%å‰Šæ¸›
  - è¨˜äº‹å“è³ªã®çµ±ä¸€ï¼ˆé¡ä¼¼åº¦ã‚¹ã‚³ã‚¢30ç‚¹ä»¥ä¸‹ç¶­æŒï¼‰
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªé€²æ—ç®¡ç†ã®å®Ÿç¾
  - è‡ªå‹•åŒ–ã«ã‚ˆã‚‹äººçš„ãƒŸã‚¹å‰Šæ¸›
```

### 1.2 ã‚·ã‚¹ãƒ†ãƒ ä¾¡å€¤ææ¡ˆ

**ğŸ¯ ä¸»è¦ä¾¡å€¤:**
1. **åŠ¹ç‡åŒ–**: SSEã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—ç®¡ç†ã§ä½œæ¥­åŠ¹ç‡å‘ä¸Š
2. **å“è³ªå‘ä¸Š**: è‡ªå‹•å“è³ªãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚‹ä¸€å®šæ°´æº–ã®ä¿è¨¼
3. **å¯è¦–åŒ–**: Lark Baseã«ã‚ˆã‚‹å…¨ãƒ—ãƒ­ã‚»ã‚¹ã®é€æ˜æ€§ç¢ºä¿
4. **è‡ªå‹•åŒ–**: ç¹°ã‚Šè¿”ã—ä½œæ¥­ã®è‡ªå‹•åŒ–ã«ã‚ˆã‚‹ç”Ÿç”£æ€§å‘ä¸Š
5. **å”æ¥­**: ãƒãƒ¼ãƒ å…¨ä½“ã§ã®æƒ…å ±å…±æœ‰ã¨å½¹å‰²åˆ†æ‹…ã®æœ€é©åŒ–

### 1.3 æŠ€è¡“é¸æŠç†ç”±

| æŠ€è¡“ | é¸æŠç†ç”± | ä»£æ›¿æ¡ˆã¨ã®æ¯”è¼ƒ |
|------|---------|---------------|
| **Lark Base** | ä¼æ¥­å‘ã‘å”æ¥­ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€æ—¥æœ¬èªã‚µãƒãƒ¼ãƒˆå……å®Ÿ | Notion DB: çµ±åˆæ€§ã§åŠ£ã‚‹ã€Airtable: æ—¥æœ¬èªã‚µãƒãƒ¼ãƒˆä¸è¶³ |
| **SSE** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã®è»½é‡æ€§ã€ãƒ–ãƒ©ã‚¦ã‚¶æ¨™æº–ã‚µãƒãƒ¼ãƒˆ | WebSocket: è¤‡é›‘æ€§å¢—åŠ ã€Polling: åŠ¹ç‡æ€§ã§åŠ£ã‚‹ |
| **Node.js/Express** | JavaScriptçµ±ä¸€ã€è±Šå¯Œãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ  | Python: Lark SDKã‚µãƒãƒ¼ãƒˆä¸è¶³ã€Go: é–‹ç™ºé€Ÿåº¦ã§åŠ£ã‚‹ |

---

## 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“æ§‹æˆå›³

```mermaid
graph TB
    subgraph "Client Layer"
        A[Web Browser<br/>HTML5 + SSE]
        B[Mobile Client<br/>Optional]
    end
    
    subgraph "Application Layer"
        C[Express Server<br/>Node.js 18+]
        D[SSE Manager<br/>Real-time Events]
        E[Workflow Engine<br/>State Machine]
        F[Quality Controller<br/>Content Analysis]
    end
    
    subgraph "Integration Layer"
        G[Lark Base SDK<br/>Data Management]
        H[note.com API<br/>Content Publishing]
        I[Google APIs<br/>SEO Analytics]
        J[MCP Scout<br/>Content Analysis]
    end
    
    subgraph "Data Layer"
        K[Lark Base Tables<br/>Primary Store]
        L[Redis Cache<br/>Session & Temp Data]
        M[Local Storage<br/>Config & Logs]
    end
    
    A --> C
    A --> D
    C --> E
    C --> F
    E --> G
    E --> H
    E --> I
    E --> J
    G --> K
    C --> L
    C --> M
```

### 2.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```yaml
Core Framework:
  - Node.js: 18.17.0+
  - Express.js: 4.18.2
  - ES Modules: Native ESM support

Real-time Communication:
  - Server-Sent Events: Native implementation
  - CORS: Cross-origin resource sharing
  - Compression: gzip/brotli

External Integration:
  - "@larksuiteoapi/node-sdk": 1.20.0
  - "uuid": 9.0.1 (Session management)
  - "dotenv": 16.3.1 (Configuration)
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```yaml
UI Framework:
  - HTML5: Semantic markup
  - CSS3: Modern layout (Grid, Flexbox)
  - JavaScript: ES2022+ features
  - EventSource: SSE client implementation

State Management:
  - Native JavaScript objects
  - LocalStorage: Persistent settings
  - SessionStorage: Temporary data
```

### 2.3 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```yaml
Production Environment:
  Platform: Railway/Vercel
  Domain: workflow.ambitiousai.co.jp
  SSL: Let's Encrypt (Auto-renewal)
  CDN: Cloudflare
  Monitoring: Built-in health checks
  
Development Environment:
  Local: localhost:3001
  Hot Reload: nodemon
  Debug: Node.js Inspector
  
Staging Environment:
  Platform: Railway Staging
  Domain: staging-workflow.ambitiousai.co.jp
  Purpose: Integration testing
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 3.1 Lark Base ERå›³

```mermaid
erDiagram
    ARTICLES {
        string article_title PK
        enum ai_category
        url article_url UK
        enum status
        enum writing_phase
        number word_count
        number similarity_score
        number seo_score
        number internal_links
        number image_count
        number h2_count
        number h3_count
        text meta_description
        date first_draft_date
        date review_date
        date publish_date
        number pv_week
        number pv_month
        number search_rank
    }
    
    KEYWORDS {
        string keyword PK
        enum category
        enum priority
        multi_enum usage_location
        enum search_volume
        enum competition
        url competitor_url1
        url competitor_url2
        url competitor_url3
        text differentiation
        text related_keywords
        date extraction_date
    }
    
    COMPETITORS {
        url competitor_url PK
        string site_name
        string article_title
        date publish_date
        number estimated_words
        text h2_structure
        text used_keywords
        text strengths
        text weaknesses
        text opportunities
        date analysis_date
    }
    
    PERFORMANCE {
        string article_id PK
        date measurement_date PK
        number search_rank
        number page_views
        number stay_time
        number bounce_rate
        number likes
        number comments
        number membership_cv
        text improvement_actions
    }
    
    WRITERS {
        string writer_name PK
        number total_articles
        enum main_category
        number monthly_target
        number monthly_current
        multi_enum specialties
        multi_enum skill_keywords
        number hourly_rate
        enum contract_type
    }
    
    ARTICLES ||--o{ KEYWORDS : contains
    ARTICLES ||--o{ COMPETITORS : analyzed_against
    ARTICLES ||--o{ PERFORMANCE : tracked_by
    WRITERS ||--o{ ARTICLES : writes
```

### 3.2 ãƒ†ãƒ¼ãƒ–ãƒ«ä»•æ§˜è©³ç´°

#### 3.2.1 è¨˜äº‹æŠ•ç¨¿è¨˜éŒ²_æ‹¡å¼µç‰ˆ (Articles Master)
**Table ID**: `tbl6Lcel9u6C1N3A`
**ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã‚­ãƒ¼**: è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | åˆ¶ç´„ | èª¬æ˜ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
|------------|-----|------|------|---------------|
| è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ« | Text | Required, Unique | è¨˜äº‹ã®ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ« | 1-100æ–‡å­— |
| AIã‚«ãƒ†ã‚´ãƒª | SingleSelect | Required | ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ | AIæ´»ç”¨/DX/æŠ€è¡“è§£èª¬ |
| è¨˜äº‹URL | URL | Unique | note.com URL | https://note.com/* |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | SingleSelect | Required | ä½œæ¥­çŠ¶æ…‹ | æ–°è¦/ç¢ºèªä¸­/å®Œäº† |
| åŸ·ç­†ãƒ•ã‚§ãƒ¼ã‚º | SingleSelect | Required | åŸ·ç­†æ®µéš | èª¿æŸ»/åŸ·ç­†/ç·¨é›†/ãƒ¬ãƒ“ãƒ¥ãƒ¼/å…¬é–‹ |
| æ–‡å­—æ•° | Number | â‰¥0 | è¨˜äº‹ã®æ–‡å­—æ•° | 0-50000 |
| é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ | Number | 0-100 | AIåˆ¤å®šã‚¹ã‚³ã‚¢ | é–¾å€¤30ä»¥ä¸‹æ¨å¥¨ |
| SEOã‚¹ã‚³ã‚¢ | Number | 0-100 | SEOç·åˆè©•ä¾¡ | 80ä»¥ä¸Šç›®æ¨™ |
| å†…éƒ¨ãƒªãƒ³ã‚¯æ•° | Number | â‰¥0 | å†…éƒ¨ãƒªãƒ³ã‚¯æ•° | 3æœ¬ä»¥ä¸Šæ¨å¥¨ |
| ç”»åƒæ•° | Number | â‰¥0 | ä½¿ç”¨ç”»åƒæ•° | Altå±æ€§å¿…é ˆ |
| H2è¦‹å‡ºã—æ•° | Number | â‰¥0 | H2ã‚¿ã‚°æ•° | 3å€‹ä»¥ä¸Šæ¨å¥¨ |
| H3è¦‹å‡ºã—æ•° | Number | â‰¥0 | H3ã‚¿ã‚°æ•° | - |
| ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ | Text | Max120æ–‡å­— | SEOç”¨èª¬æ˜æ–‡ | 100-120æ–‡å­—æ¨å¥¨ |

#### 3.2.2 SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç®¡ç†_æ‹¡å¼µç‰ˆ (SEO Keywords Master)
**Table ID**: `tblBryNkDdCXzRu2`
**ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã‚­ãƒ¼**: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|------------|-----|------|------|
| ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | Text | Required, Unique | å¯¾è±¡ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ |
| ã‚«ãƒ†ã‚´ãƒªãƒ¼ | SingleSelect | Required | AI/DX/æŠ€è¡“ |
| å„ªå…ˆåº¦ | SingleSelect | Required | æœ€å„ªå…ˆ/ç¬¬2/ç¬¬3/ä½ |
| ä½¿ç”¨å ´æ‰€ | MultiSelect | Required | ã‚¿ã‚¤ãƒˆãƒ«/H1/H2/æœ¬æ–‡ |
| æ¤œç´¢ãƒœãƒªãƒ¥ãƒ¼ãƒ  | SingleSelect | Required | é«˜(10000+)/ä¸­(1000-10000)/ä½(<1000) |
| ç«¶åˆåº¦ | SingleSelect | Required | é«˜/ä¸­/ä½ |

### 3.3 ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§åˆ¶ç´„

```sql
-- é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ã®è­¦å‘Šãƒ«ãƒ¼ãƒ«
WHEN similarity_score > 30 THEN 
  status = 'ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆ'

-- SEOã‚¹ã‚³ã‚¢ã®å“è³ªåŸºæº–
WHEN seo_score < 60 THEN
  writing_phase = 'æœ€é©åŒ–å¿…è¦'

-- å†…éƒ¨ãƒªãƒ³ã‚¯æœ€ä½åŸºæº–
WHEN internal_links < 3 THEN
  quality_check = 'NG'
```

---

## 4. APIä»•æ§˜æ›¸

### 4.1 èªè¨¼ãƒ»èªå¯

#### 4.1.1 èªè¨¼ãƒ•ãƒ­ãƒ¼
```yaml
Authentication Type: Bearer Token (Lark Tenant Access Token)
Header Format: Authorization: Bearer {tenant_access_token}
Token Lifecycle: 2 hours (Auto-refresh)
Scope: bitable:read, bitable:write
```

#### 4.1.2 èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```javascript
POST /api/auth/token
Content-Type: application/json

Request:
{
  "app_id": "cli_xxxxx",
  "app_secret": "xxxxxx"
}

Response:
{
  "tenant_access_token": "t-xxxxx",
  "expires_in": 7200
}
```

### 4.2 RESTful API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### 4.2.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç®¡ç†

**æ–°è¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹**
```http
POST /api/workflow/start
Content-Type: application/json
Authorization: Bearer {token}

Request Body:
{
  "topic": "Claude Codeå°å…¥ã‚¬ã‚¤ãƒ‰",
  "parameters": {
    "style": "professional",
    "length": "medium", 
    "language": "ja",
    "target_keywords": ["claude code", "AIé–‹ç™º", "åŠ¹ç‡åŒ–"],
    "target_audience": "é–‹ç™ºè€…"
  },
  "larkConfig": {
    "userId": "ou_xxxxx",
    "assignedWriter": "ãƒãƒ¤ã‚·ã‚·ãƒ¥ãƒ³ã‚¹ã‚±"
  }
}

Response:
{
  "workflowId": "wf_20250811_001",
  "status": "started",
  "message": "ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é–‹å§‹ã—ã¾ã—ãŸ",
  "estimatedDuration": 1800,
  "larkBase": {
    "appToken": "WaTCbnKSiaJvMcs3cdPjxobKp8C",
    "tableId": "tbl6Lcel9u6C1N3A",
    "recordId": "rec_xxxxx"
  }
}
```

**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çŠ¶æ…‹å–å¾—**
```http
GET /api/workflow/{workflowId}/status
Authorization: Bearer {token}

Response:
{
  "workflowId": "wf_20250811_001",
  "status": "in_progress",
  "progress": 45,
  "currentStage": "content_generation",
  "stages": {
    "initialization": { "status": "completed", "duration": 30 },
    "research": { "status": "completed", "duration": 600 },
    "outline": { "status": "completed", "duration": 300 },
    "generation": { "status": "in_progress", "duration": 450 },
    "review": { "status": "pending", "duration": null }
  },
  "startTime": "2025-08-11T09:00:00Z",
  "estimatedEndTime": "2025-08-11T09:30:00Z"
}
```

#### 4.2.2 Lark Baseæ“ä½œ

**ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§å–å¾—**
```http
GET /api/lark/records?pageSize=20&pageToken=xxxxx&filter=status:æ–°è¦
Authorization: Bearer {token}

Response:
{
  "records": [
    {
      "recordId": "rec_xxxxx",
      "fields": {
        "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«": "Claude Codeå°å…¥ã‚¬ã‚¤ãƒ‰",
        "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹": "æ–°è¦",
        "åŸ·ç­†ãƒ•ã‚§ãƒ¼ã‚º": "èª¿æŸ»",
        "é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢": 25,
        "SEOã‚¹ã‚³ã‚¢": 85
      },
      "createdTime": "2025-08-11T09:00:00Z",
      "lastModifiedTime": "2025-08-11T09:15:00Z"
    }
  ],
  "hasMore": false,
  "pageToken": "xxxxx",
  "total": 1
}
```

**ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ**
```http
POST /api/lark/records
Content-Type: application/json
Authorization: Bearer {token}

Request:
{
  "fields": {
    "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«": "æ–°è¦è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«",
    "AIã‚«ãƒ†ã‚´ãƒª": "AIæ´»ç”¨",
    "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹": "æ–°è¦",
    "åŸ·ç­†ãƒ•ã‚§ãƒ¼ã‚º": "èª¿æŸ»",
    "å„ªå…ˆåº¦": "é«˜"
  }
}

Response:
{
  "recordId": "rec_20250811_001",
  "fields": { ... },
  "createdTime": "2025-08-11T09:00:00Z"
}
```

### 4.3 Server-Sent Events (SSE)

**SSEæ¥ç¶š**
```http
GET /api/workflow/stream
Accept: text/event-stream
Cache-Control: no-cache
Authorization: Bearer {token}

Response Stream:
event: connected
data: {"connectionId": "conn_xxxxx", "timestamp": "2025-08-11T09:00:00Z"}

event: stage_update
data: {"stage": "research", "progress": 25, "message": "ç«¶åˆè¨˜äº‹åˆ†æä¸­..."}

event: content_progress 
data: {"type": "outline", "content": "## 1. Claude Codeã¨ã¯\n### 1.1 æ¦‚è¦", "wordCount": 150}

event: stage_complete
data: {"stage": "research", "duration": 600, "results": {"competitorCount": 5, "keywordCount": 12}}

event: heartbeat
data: {"timestamp": "2025-08-11T09:05:00Z", "activeConnections": 3}

event: error
data: {"error": "LARK_API_ERROR", "message": "Lark APIã®å‘¼ã³å‡ºã—ã«å¤±æ•—ã—ã¾ã—ãŸ", "code": "E001"}
```

### 4.4 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰
```yaml
200: OK - æ­£å¸¸å‡¦ç†
201: Created - ãƒªã‚½ãƒ¼ã‚¹ä½œæˆæˆåŠŸ
400: Bad Request - ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼
401: Unauthorized - èªè¨¼ã‚¨ãƒ©ãƒ¼
403: Forbidden - èªå¯ã‚¨ãƒ©ãƒ¼
404: Not Found - ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„
429: Too Many Requests - ãƒ¬ãƒ¼ãƒˆåˆ¶é™
500: Internal Server Error - ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
502: Bad Gateway - å¤–éƒ¨APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼
503: Service Unavailable - ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ä¸­
```

#### ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
```javascript
{
  "error": {
    "code": "LARK_AUTH_FAILED",
    "message": "Larkèªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¢ãƒ—ãƒªæ¨©é™ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
    "details": {
      "appId": "cli_xxxxx",
      "requiredScopes": ["bitable:read", "bitable:write"]
    },
    "timestamp": "2025-08-11T09:00:00Z",
    "requestId": "req_xxxxx"
  }
}
```

---

## 5. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 5.1 è¨˜äº‹ä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```mermaid
stateDiagram-v2
    [*] --> åˆæœŸåŒ–: Start Workflow
    
    åˆæœŸåŒ– --> ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰èª¿æŸ»: Initialize Complete
    note right of åˆæœŸåŒ–: - Lark Baseæ¥ç¶šç¢ºèª\n- ãƒ¯ãƒ¼ã‚«ãƒ¼æº–å‚™\n- åˆæœŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š
    
    ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰èª¿æŸ» --> ç«¶åˆåˆ†æ: Keywords Extracted
    note right of ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰èª¿æŸ»: - SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º\n- æ¤œç´¢ãƒœãƒªãƒ¥ãƒ¼ãƒ èª¿æŸ»\n- å„ªå…ˆåº¦è¨­å®š
    
    ç«¶åˆåˆ†æ --> æ§‹æˆä½œæˆ: Analysis Complete  
    note right of ç«¶åˆåˆ†æ: - ä¸Šä½è¨˜äº‹åˆ†æ\n- å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆç‰¹å®š\n- H2æ§‹æˆæ¡ˆä½œæˆ
    
    æ§‹æˆä½œæˆ --> ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ: Outline Approved
    note right of æ§‹æˆä½œæˆ: - ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ä½œæˆ\n- æ§‹æˆãƒ¬ãƒ“ãƒ¥ãƒ¼\n- æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹
    
    ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ --> å“è³ªãƒã‚§ãƒƒã‚¯: Content Generated
    note right of ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ: - æœ¬æ–‡åŸ·ç­†\n- è¦‹å‡ºã—èª¿æ•´\n- ç”»åƒé…ç½®
    
    å“è³ªãƒã‚§ãƒƒã‚¯ --> é¡ä¼¼åº¦åˆ¤å®š: Quality OK
    note right of å“è³ªãƒã‚§ãƒƒã‚¯: - æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯\n- SEOè¦ä»¶ç¢ºèª\n- å†…éƒ¨ãƒªãƒ³ã‚¯ç¢ºèª
    
    é¡ä¼¼åº¦åˆ¤å®š --> SEOæœ€é©åŒ–: Score â‰¤ 30
    é¡ä¼¼åº¦åˆ¤å®š --> ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¿®æ­£: Score > 30
    note right of é¡ä¼¼åº¦åˆ¤å®š: - AIé¡ä¼¼åº¦åˆ†æ\n- ã‚ªãƒªã‚¸ãƒŠãƒªãƒ†ã‚£è©•ä¾¡\n- é–¾å€¤åˆ¤å®š
    
    ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¿®æ­£ --> å“è³ªãƒã‚§ãƒƒã‚¯: Revision Complete
    note right of ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¿®æ­£: - é¡ä¼¼éƒ¨åˆ†ç‰¹å®š\n- ã‚ªãƒªã‚¸ãƒŠãƒ«è¦ç´ è¿½åŠ \n- å†æ§‹æˆ
    
    SEOæœ€é©åŒ– --> æœ€çµ‚ç¢ºèª: SEO Complete
    note right of SEOæœ€é©åŒ–: - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š\n- ã‚¹ãƒ‹ãƒšãƒƒãƒˆæœ€é©åŒ–\n- ã‚¿ã‚°èª¿æ•´
    
    æœ€çµ‚ç¢ºèª --> Larkä¿å­˜: Approved
    note right of æœ€çµ‚ç¢ºèª: - æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼\n- å…¬é–‹ãƒã‚§ãƒƒã‚¯\n- æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹
    
    Larkä¿å­˜ --> å®Œäº†: Data Saved
    note right of Larkä¿å­˜: - Lark Baseã¸ä¿å­˜\n- é–¢é€£ãƒ‡ãƒ¼ã‚¿æ›´æ–°\n- é€šçŸ¥é€ä¿¡
    
    å®Œäº† --> [*]
```

### 5.2 ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥å‡¦ç†è©³ç´°

#### Stage 1: åˆæœŸåŒ– (Initialization)
```yaml
Duration: 30-60ç§’
Owner: System
Dependencies: 
  - Lark Base connection
  - User authentication
  - Environment configuration

Processing:
  1. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼IDç”Ÿæˆ (UUID v4)
  2. Lark Baseæ¥ç¶šç¢ºèª
  3. åˆæœŸãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
  4. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  5. SSEæ¥ç¶šé–‹å§‹é€šçŸ¥

Success Criteria:
  - Lark Baseã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸ
  - åˆæœŸãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆå®Œäº†
  - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¦¥å½“æ€§ç¢ºèª

Error Handling:
  - èªè¨¼å¤±æ•— â†’ 401ã‚¨ãƒ©ãƒ¼è¿”å´
  - Baseæ¥ç¶šå¤±æ•— â†’ ãƒªãƒˆãƒ©ã‚¤(3å›)
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ â†’ 503ã‚¨ãƒ©ãƒ¼è¿”å´
```

#### Stage 2: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰èª¿æŸ» (Keyword Research)
```yaml
Duration: 5-10åˆ†
Owner: Content Analyst (AI)
Dependencies:
  - Google Keyword Planner API (Optional)
  - Competitor analysis data
  - User input keywords

Processing:
  1. ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º
    - Input topicã‹ã‚‰ä¸»è¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç‰¹å®š
    - é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ
    - æ¤œç´¢ãƒœãƒªãƒ¥ãƒ¼ãƒ æ¨å®š
  
  2. ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ†æ
    - ç«¶åˆåº¦è©•ä¾¡
    - å„ªå…ˆåº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°
    - ä½¿ç”¨æ¨å¥¨ç®‡æ‰€æ±ºå®š
  
  3. Lark Baseæ›´æ–°
    - SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°
    - é–¢é€£è¨˜äº‹ã¨ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
    - å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹æ›´æ–°

Output:
  - Primary Keywords: 3-5å€‹
  - Secondary Keywords: 8-12å€‹
  - Long-tail Keywords: 15-20å€‹
  - Keyword Strategy: JSON format
```

#### Stage 3: ç«¶åˆåˆ†æ (Competitor Analysis)
```yaml
Duration: 10-15åˆ†
Owner: Research Analyst (AI + MCP Scout)
Dependencies:
  - Web crawling capability
  - Content analysis tools
  - SEO analysis tools

Processing:
  1. ç«¶åˆè¨˜äº‹ç‰¹å®š
    - ä¸Šä½10è¨˜äº‹ã® URL åé›†
    - ã‚µã‚¤ãƒˆæ¨©å¨æ€§è©•ä¾¡
    - å…¬é–‹æ—¥ãƒ»æ›´æ–°æ—¥ç¢ºèª
  
  2. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ
    - H2/H3æ§‹æˆåˆ†æ
    - æ–‡å­—æ•°ãƒ»ç”»åƒæ•°æ¸¬å®š
    - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¯†åº¦è¨ˆç®—
    - å†…éƒ¨ãƒªãƒ³ã‚¯æˆ¦ç•¥åˆ†æ
  
  3. å·®åˆ¥åŒ–æ©Ÿä¼šç‰¹å®š
    - ã‚«ãƒãƒ¼ã§ãã¦ã„ãªã„è§’åº¦ç™ºè¦‹
    - æƒ…å ±ã®é®®åº¦ã‚®ãƒ£ãƒƒãƒ—ç‰¹å®š
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ”¹å–„ç‚¹ç‰¹å®š

Output:
  - Competitor Report: è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
  - Differentiation Strategy: å·®åˆ¥åŒ–æˆ¦ç•¥
  - Content Gap Analysis: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚®ãƒ£ãƒƒãƒ—
  - Recommended Approach: æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
```

### 5.3 å“è³ªåŸºæº–ã¨ã‚²ãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯

#### é¡ä¼¼åº¦åˆ¤å®šåŸºæº–
```yaml
Score Range: 0-100 (Cosine Similarity %)

Quality Levels:
  Excellent (0-20):
    Status: "âœ… å„ªç§€"
    Action: "ãã®ã¾ã¾é€²è¡Œ"
    Description: "ã‚ªãƒªã‚¸ãƒŠãƒªãƒ†ã‚£ãŒéå¸¸ã«é«˜ã„"
  
  Good (21-30):
    Status: "âœ… è‰¯å¥½" 
    Action: "ãã®ã¾ã¾é€²è¡Œ"
    Description: "ååˆ†ãªã‚ªãƒªã‚¸ãƒŠãƒªãƒ†ã‚£ã‚ã‚Š"
  
  Caution (31-50):
    Status: "âš ï¸ æ³¨æ„"
    Action: "éƒ¨åˆ†ä¿®æ­£æ¨å¥¨"
    Description: "é¡ä¼¼éƒ¨åˆ†ã®è¦‹ç›´ã—å¿…è¦"
  
  Warning (51-70):
    Status: "âš¡ è­¦å‘Š"
    Action: "å¤§å¹…ä¿®æ­£å¿…é ˆ"
    Description: "ç›¸å½“ãªä¿®æ­£ãŒå¿…è¦"
  
  Critical (71-100):
    Status: "ğŸš« å±é™º"
    Action: "å…¨é¢æ›¸ãç›´ã—"
    Description: "å…¬é–‹ãƒªã‚¹ã‚¯æ¥µå¤§"

Algorithm:
  - TF-IDF vectorization
  - Cosine similarity calculation
  - Semantic similarity (BERT-based)
  - Structure similarity analysis
```

#### SEOå“è³ªè¦ä»¶
```yaml
Title Requirements:
  Length: 28-32æ–‡å­—
  Keywords: ãƒ¡ã‚¤ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¿…é ˆå«æœ‰
  Format: "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ + ä¾¡å€¤æä¾› + æ„Ÿæƒ…è¨´æ±‚"
  Example: "Claude Codeå®Œå…¨ã‚¬ã‚¤ãƒ‰ï½œé–‹ç™ºåŠ¹ç‡ã‚’3å€å‘ä¸Šã•ã›ã‚‹å®Ÿè·µæ‰‹æ³•"

Meta Description:
  Length: 100-120æ–‡å­—
  Keywords: ãƒ¡ã‚¤ãƒ³+ã‚µãƒ–ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å«æœ‰
  CTA: è¡Œå‹•ä¿ƒé€²è¦ç´ å«æœ‰
  Example: "Claude Codeã®å°å…¥ã‹ã‚‰å®Ÿè·µã¾ã§ã€é–‹ç™ºåŠ¹ç‡ã‚’åŠ‡çš„ã«å‘ä¸Šã•ã›ã‚‹æ‰‹æ³•ã‚’å®Ÿä¾‹ä»˜ãã§è§£èª¬ã€‚åˆå¿ƒè€…ã§ã‚‚ä»Šã™ãå§‹ã‚ã‚‰ã‚Œã‚‹è¨­å®šæ–¹æ³•ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å…¬é–‹ä¸­ã€‚"

Content Structure:
  H1: 1å€‹ (title)
  H2: 3-8å€‹ (å„ç« ã‚¿ã‚¤ãƒˆãƒ«)  
  H3: 8-15å€‹ (è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³)
  Word Count: 2000-8000æ–‡å­—
  Internal Links: 3-8æœ¬
  External Links: 2-5æœ¬ (æ¨©å¨æ€§ã®é«˜ã„ã‚µã‚¤ãƒˆ)
  Images: 3-10æš (altå±æ€§100%è¨­å®š)

SEO Score Calculation:
  Title Optimization: 20ç‚¹
  Meta Description: 15ç‚¹
  Header Structure: 20ç‚¹
  Keyword Density: 15ç‚¹
  Internal Linking: 15ç‚¹
  Content Length: 10ç‚¹
  Image Optimization: 5ç‚¹
  Total: 100ç‚¹ (80ç‚¹ä»¥ä¸Šã‚’ç›®æ¨™)
```

---

## 6. å®Ÿè£…ã‚¬ã‚¤ãƒ‰

### 6.1 é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### å‰ææ¡ä»¶
```bash
# Node.jsç’°å¢ƒ
Node.js: 18.17.0ä»¥ä¸Š
npm: 9.6.0ä»¥ä¸Š
Git: 2.40.0ä»¥ä¸Š

# å¿…è¦ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Larkã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (ä¼æ¥­ç‰ˆæ¨å¥¨)
- note.comã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‘ã‘)
- Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (Analyticsç”¨)
```

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/lark-content-workflow.git
cd lark-content-workflow

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›† (å¾Œè¿°ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š)

# Lark BaseåˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npm run setup:base

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

#### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# .env ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®šä¾‹
# ===================================

# Lark Configuration (å¿…é ˆ)
LARK_APP_ID=cli_a8d2fdb1f1f8d02d
LARK_APP_SECRET=V7mzILXEgIaqLwLXtyZstekRJsjRsFfJ  
LARK_BASE_APP_TOKEN=WaTCbnKSiaJvMcs3cdPjxobKp8C

# ãƒ†ãƒ¼ãƒ–ãƒ«ID (setup:baseå®Ÿè¡Œå¾Œã«è‡ªå‹•ç”Ÿæˆ)
ARTICLES_TABLE_ID=tbl6Lcel9u6C1N3A
KEYWORDS_TABLE_ID=tblBryNkDdCXzRu2
COMPETITORS_TABLE_ID=tbl6Agoi8jnIEJka
PERFORMANCE_TABLE_ID=tblj1iioooENpi3C
WRITERS_TABLE_ID=tbljQt7FRHUxYqQl

# Server Configuration
PORT=3001
NODE_ENV=development
LOG_LEVEL=info

# SSE Configuration
SSE_HEARTBEAT_INTERVAL=30000
SSE_MAX_CONNECTIONS=100
SSE_TIMEOUT=300000

# Content Generation
DEFAULT_CONTENT_LANGUAGE=ja
MAX_CONTENT_LENGTH=10000
WORKFLOW_TIMEOUT=1800000

# External APIs (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
GOOGLE_API_KEY=your_google_api_key
NOTE_COM_API_TOKEN=your_note_api_token

# Security
CORS_ORIGIN=http://localhost:3001,https://workflow.ambitiousai.co.jp
JWT_SECRET=your_jwt_secret_here
```

### 6.2 Larkã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

#### Lark Developer Consoleè¨­å®š
```yaml
Step 1: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
  1. https://open.larksuite.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹
  2. ã€Œã‚¢ãƒ—ãƒªã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
  3. åŸºæœ¬æƒ…å ±å…¥åŠ›:
     - ã‚¢ãƒ—ãƒªå: "Content Workflow System"
     - ã‚¢ãƒ—ãƒªèª¬æ˜: "note.comè¨˜äº‹ä½œæˆãƒ»æœ€é©åŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ "
     - ã‚¢ãƒ—ãƒªã‚¿ã‚¤ãƒ—: "ä¼æ¥­è‡ªå»ºã‚¢ãƒ—ãƒª"

Step 2: æ¨©é™è¨­å®š
  å¿…è¦ãªæ¨©é™:
    - bitable:read: Baseãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚Š
    - bitable:write: Baseãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿  
    - contact:read: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
    - im:message: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ (é€šçŸ¥ç”¨)

Step 3: ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
  - bitable.record.created: ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ
  - bitable.record.updated: ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆ

Step 4: å®‰å…¨è¨­å®š
  - IPè¨±å¯ãƒªã‚¹ãƒˆè¨­å®š
  - ãƒªã‚¯ã‚¨ã‚¹ãƒˆç½²åæ¤œè¨¼æœ‰åŠ¹åŒ–
  - HTTPSå¿…é ˆè¨­å®š
```

#### Lark Baseä½œæˆ
```yaml
Step 1: ãƒ™ãƒ¼ã‚¹ä½œæˆ
  1. Lark Baseã‚¢ãƒ—ãƒªã‚’é–‹ã
  2. ã€Œæ–°è¦ãƒ™ãƒ¼ã‚¹ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
  3. ãƒ™ãƒ¼ã‚¹å: "Content Workflow Management"
  4. èª¬æ˜: "è¨˜äº‹ä½œæˆãƒ»SEOæœ€é©åŒ–ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†"

Step 2: è‡ªå‹•ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
  # ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
  npm run setup:base
  
  # ã¾ãŸã¯æ‰‹å‹•å®Ÿè¡Œ
  node scripts/setup-lark-base.js

Step 3: ã‚¢ãƒ—ãƒªãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
  1. ãƒ™ãƒ¼ã‚¹è¨­å®š > é«˜çº§è®¾ç½® > å¼€å‘è€…é€‰é¡¹
  2. ã‚¢ãƒ—ãƒªãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼
  3. .envãƒ•ã‚¡ã‚¤ãƒ«ã« LARK_BASE_APP_TOKEN ã¨ã—ã¦è¨­å®š
```

### 6.3 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

#### Railway ãƒ‡ãƒ—ãƒ­ã‚¤ (æ¨å¥¨)
```yaml
Step 1: Railwayã‚¢ã‚«ã‚¦ãƒ³ãƒˆæº–å‚™
  1. https://railway.app/ ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  2. GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é€£æº
  3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

Step 2: ç’°å¢ƒå¤‰æ•°è¨­å®š
  # Railway Dashboard ã§è¨­å®š
  Variables:
    LARK_APP_ID: cli_xxxxx
    LARK_APP_SECRET: xxxxx
    LARK_BASE_APP_TOKEN: xxxxx
    NODE_ENV: production
    PORT: $PORT (Railwayè‡ªå‹•è¨­å®š)

Step 3: ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
  # railway.json
  {
    "$schema": "https://railway.app/railway.schema.json",
    "build": {
      "builder": "NIXPACKS"
    },
    "deploy": {
      "startCommand": "npm start",
      "healthcheckPath": "/health",
      "healthcheckTimeout": 100,
      "restartPolicyType": "ON_FAILURE",
      "restartPolicyMaxRetries": 10
    }
  }
```

#### Vercel ãƒ‡ãƒ—ãƒ­ã‚¤ (ä»£æ›¿)
```yaml
Step 1: vercel.json è¨­å®š
  {
    "version": 2,
    "builds": [
      { "src": "src/server.js", "use": "@vercel/node" }
    ],
    "routes": [
      { "src": "/(.*)", "dest": "/src/server.js" }
    ],
    "env": {
      "NODE_ENV": "production"
    }
  }

Step 2: ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
  npx vercel --prod
  
  # ç’°å¢ƒå¤‰æ•°è¨­å®š
  vercel env add LARK_APP_ID production
  vercel env add LARK_APP_SECRET production
  vercel env add LARK_BASE_APP_TOKEN production
```

### 6.4 é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

#### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥
```bash
# Git Flow ãƒ™ãƒ¼ã‚¹
main: æœ¬ç•ªç’°å¢ƒ
develop: é–‹ç™ºçµ±åˆ
feature/*: æ–°æ©Ÿèƒ½é–‹ç™º
hotfix/*: ç·Šæ€¥ä¿®æ­£
release/*: ãƒªãƒªãƒ¼ã‚¹æº–å‚™

# ä¾‹: æ–°æ©Ÿèƒ½é–‹ç™º
git checkout develop
git checkout -b feature/seo-optimization
# é–‹ç™ºä½œæ¥­...
git add .
git commit -m "feat: add SEO score calculation"
git push origin feature/seo-optimization
# ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ
```

#### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
```javascript
// ESLint + Prettier è¨­å®š
// .eslintrc.json
{
  "env": {
    "node": true,
    "es2022": true
  },
  "extends": ["eslint:recommended"],
  "parserOptions": {
    "ecmaVersion": "latest",
    "sourceType": "module"
  },
  "rules": {
    "no-unused-vars": "error",
    "no-console": "warn",
    "prefer-const": "error"
  }
}

// é–¢æ•°å‘½åè¦å‰‡
// âœ… Good
async function calculateSeoScore(content) { ... }
const getLarkRecords = async () => { ... }

// âŒ Bad  
function calc(data) { ... }
const get_data = () => { ... }

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¦å‰‡
try {
  const result = await larkBaseManager.createRecord(data);
  return { success: true, data: result };
} catch (error) {
  console.error('Record creation failed:', error);
  throw new WorkflowError('LARK_CREATE_FAILED', error.message);
}
```

---

## 7. é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

### 7.1 æ—¥å¸¸é‹ç”¨æ‰‹é †

#### æ¯æ—¥ã®ç¢ºèªé …ç›® (Daily Checklist)
```yaml
Morning Check (9:00):
  - [ ] ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ³ç¢ºèª
    Command: curl -f http://localhost:3001/health
    Expected: HTTP 200, "status": "healthy"
  
  - [ ] Lark Baseæ¥ç¶šç¢ºèª  
    Command: npm run test:lark
    Expected: âœ… All connections successful
  
  - [ ] å‰æ—¥ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œçµæœç¢ºèª
    Location: Lark Base > ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
    Check: ã‚¨ãƒ©ãƒ¼ä»¶æ•°ã€å¹³å‡å‡¦ç†æ™‚é–“
  
  - [ ] ã‚¢ã‚¯ãƒ†ã‚£ãƒ–SSEæ¥ç¶šæ•°ç¢ºèª
    Endpoint: GET /api/connections/count
    Alert: 50æ¥ç¶šä»¥ä¸Šã§èª¿æŸ»

Evening Check (18:00):
  - [ ] å½“æ—¥å‡¦ç†ä»¶æ•°é›†è¨ˆ
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ¬ãƒ“ãƒ¥ãƒ¼  
  - [ ] ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡ç¢ºèª
  - [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ³ç¢ºèª
```

#### é€±æ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ (Weekly Maintenance)
```yaml
Every Monday 2:00 AM:
  Automated Tasks:
    - [ ] ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
      Command: npm run logs:rotate
      Retention: 30 days
    
    - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
      Command: npm run report:weekly
      Output: reports/weekly_YYYY-MM-DD.json
    
    - [ ] ä¾å­˜é–¢ä¿‚æ›´æ–°ãƒã‚§ãƒƒã‚¯
      Command: npm audit && npm outdated
      Action: å¿…è¦ã«å¿œã˜ã¦ãƒ‘ãƒƒãƒé©ç”¨
    
    - [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
      Action: å¤ã„ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤
      Retention: 90æ—¥é–“

  Manual Tasks:
    - [ ] KPIé”æˆçŠ¶æ³ãƒ¬ãƒ“ãƒ¥ãƒ¼
    - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ†æ  
    - [ ] å®¹é‡ä½¿ç”¨é‡ç¢ºèª
    - [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç¢ºèª
```

### 7.2 ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

#### ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–é …ç›®
```yaml
Infrastructure Metrics:
  CPU Usage:
    Warning: > 70%
    Critical: > 85%
    Duration: 5åˆ†é–“ç¶™ç¶š
    
  Memory Usage:
    Warning: > 80%
    Critical: > 90%
    Duration: 3åˆ†é–“ç¶™ç¶š
    
  Disk Usage:
    Warning: > 80%
    Critical: > 90%
    Check: æ¯æ™‚
    
  Network I/O:
    Warning: > 100MB/s sustained
    Critical: > 200MB/s sustained
    Duration: 2åˆ†é–“ç¶™ç¶š

Application Metrics:
  Response Time:
    Warning: > 2ç§’ (å¹³å‡)
    Critical: > 5ç§’ (å¹³å‡)  
    Window: 5åˆ†é–“
    
  Error Rate:
    Warning: > 1%
    Critical: > 5%
    Window: 10åˆ†é–“
    
  SSE Connections:
    Warning: > 80 concurrent
    Critical: > 100 concurrent
    
  Workflow Success Rate:
    Warning: < 95%
    Critical: < 90%
    Window: 1æ™‚é–“
```

#### ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥è¨­å®š
```yaml
Notification Channels:
  Lark Group: "ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨ãƒãƒ¼ãƒ "
  Email: ops-team@company.com
  SMS: +81-XX-XXXX-XXXX (Critical only)

Alert Routing:
  Infrastructure Issues:
    â†’ Lark + Email
    Escalation: 30åˆ†å¾Œã«SMS
    
  Application Errors:
    â†’ Larké€šçŸ¥
    Escalation: 15åˆ†å¾Œã«Email
    
  Business Logic Errors:
    â†’ Larké€šçŸ¥ã®ã¿
    
  Security Events:
    â†’ Lark + Email + SMS (å³åº§)

Alert Templates:
  Warning:
    "âš ï¸ [WARNING] {service_name}ã§ç•°å¸¸ã‚’æ¤œå‡º
    é …ç›®: {metric_name}
    ç¾åœ¨å€¤: {current_value}
    é–¾å€¤: {threshold}
    æ™‚åˆ»: {timestamp}"
    
  Critical:
    "ğŸš¨ [CRITICAL] ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ã§ã™
    ã‚µãƒ¼ãƒ“ã‚¹: {service_name}
    å•é¡Œ: {issue_description}
    å½±éŸ¿: {impact_assessment}
    å¯¾å¿œè€…: @channel"
```

### 7.3 ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

**å•é¡Œ1: SSEæ¥ç¶šãŒé »ç¹ã«åˆ‡ã‚Œã‚‹**
```yaml
ç—‡çŠ¶:
  - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæ•°åˆ†ã§æ¥ç¶šåˆ‡æ–­
  - "SSE connection lost" ã‚¨ãƒ©ãƒ¼
  - ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§EventSource error

åŸå› :
  - ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸å®‰å®šæ€§
  - ã‚µãƒ¼ãƒãƒ¼å´ã®ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯

è§£æ±ºç­–:
  1. Heartbeaté–“éš”ã‚’çŸ­ç¸®:
     SSE_HEARTBEAT_INTERVAL=15000 (15ç§’)
  
  2. ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½å®Ÿè£…:
     ```javascript
     const eventSource = new EventSource('/api/workflow/stream');
     eventSource.onerror = function() {
       setTimeout(() => {
         window.location.reload();
       }, 5000);
     };
     ```
  
  3. ãƒ—ãƒ­ã‚­ã‚·è¨­å®šç¢ºèª:
     nginx.conf ã« proxy_read_timeout 3600; ã‚’è¿½åŠ 
```

**å•é¡Œ2: Lark API ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼**
```yaml
ç—‡çŠ¶:
  - HTTP 429 Too Many Requests
  - "API rate limit exceeded" ã‚¨ãƒ©ãƒ¼
  - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å‡¦ç†ã®å¤±æ•—

åŸå› :
  - APIå‘¼ã³å‡ºã—é »åº¦ãŒåˆ¶é™ã‚’è¶…é
  - åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤šã™ãã‚‹
  - ãƒãƒƒã‚¯ã‚ªãƒ•å‡¦ç†ã®ä¸å‚™

è§£æ±ºç­–:
  1. ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œã®å®Ÿè£…:
     ```javascript
     const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));
     
     async function callLarkAPI(apiCall) {
       let retries = 0;
       while (retries < 5) {
         try {
           return await apiCall();
         } catch (error) {
           if (error.code === 429) {
             const backoffTime = Math.pow(2, retries) * 1000;
             await delay(backoffTime);
             retries++;
           } else {
             throw error;
           }
         }
       }
     }
     ```
  
  2. ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶é™è¨­å®š:
     - æœ€å¤§åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: 5ä»¶
     - ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–“éš”: 200msä»¥ä¸Š
     - ãƒªãƒˆãƒ©ã‚¤ä¸Šé™: 5å›
```

**å•é¡Œ3: é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ãŒç•°å¸¸ã«é«˜ã„**
```yaml
ç—‡çŠ¶:
  - é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ 80-100% ãŒç¶™ç¶š
  - ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã‚‚é«˜ã‚¹ã‚³ã‚¢
  - å“è³ªãƒã‚§ãƒƒã‚¯ã§å…¨ã¦ NGåˆ¤å®š

åŸå› :
  - é¡ä¼¼åº¦è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ãƒã‚°
  - æ¯”è¼ƒå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®å•é¡Œ
  - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡ã®éåº¦ãªå½±éŸ¿

è§£æ±ºç­–:
  1. ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ èª¿æ•´:
     ```javascript
     // TF-IDFãƒ™ã‚¯ãƒˆãƒ«ã®æ­£è¦åŒ–
     function calculateSimilarity(text1, text2) {
       const minLength = Math.min(text1.length, text2.length);
       if (minLength < 100) return 0; // çŸ­æ–‡ã¯é¡ä¼¼åº¦è¨ˆç®—ã—ãªã„
       
       // ã‚¹ãƒˆãƒƒãƒ—ãƒ¯ãƒ¼ãƒ‰é™¤å»å¼·åŒ–
       const stopWords = ['ã§ã™', 'ã¾ã™', 'ã§ã‚ã‚‹', 'ã¤ã„ã¦', 'ã«ãŠã„ã¦'];
       // ... è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
     }
     ```
  
  2. æ¯”è¼ƒå¯¾è±¡ã®æœ€é©åŒ–:
     - åŒä¸€ã‚µã‚¤ãƒˆè¨˜äº‹ã¨ã®æ¯”è¼ƒã‚’é™¤å¤–
     - å¤ã„è¨˜äº‹ (2å¹´ä»¥ä¸Š) ã®é‡ã¿ä»˜ã‘å‰Šæ¸›
     - ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹åŒ–ã®è¾æ›¸ä½¿ç”¨
```

### 7.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### å¿œç­”æ™‚é–“æ”¹å–„
```yaml
Current Performance:
  Average Response: 1.2ç§’
  95th Percentile: 2.8ç§’
  Workflow Duration: 15-30åˆ†

Target Performance:
  Average Response: < 800ms
  95th Percentile: < 2.0ç§’  
  Workflow Duration: 10-20åˆ†

Optimization Strategies:
  1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæœ€é©åŒ–:
     - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ 
     - N+1ã‚¯ã‚¨ãƒªå•é¡Œè§£æ±º
     - ä¸è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å–å¾—ã‚’å‰Šé™¤
  
  2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…:
     - Rediså°å…¥ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹, ã‚»ãƒƒã‚·ãƒ§ãƒ³)
     - CDNä½¿ç”¨ (é™çš„ãƒ•ã‚¡ã‚¤ãƒ«)
     - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  
  3. éåŒæœŸå‡¦ç†æ´»ç”¨:
     - ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢
     - ã‚­ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å°å…¥
     - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†æ‹¡å¼µ
```

---

## 8. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 8.1 ãƒ†ã‚¹ãƒˆæ–¹é‡

#### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰
```yaml
Test Strategy: "Trophy Testing"
  Unit Tests (60%):
    - å€‹åˆ¥é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆ
    - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯æ¤œè¨¼
    - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª
    Coverage: 80%ä»¥ä¸Š
    
  Integration Tests (30%):
    - APIé–“ã®é€£æºãƒ†ã‚¹ãƒˆ
    - ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼æ¤œè¨¼
    - å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆç¢ºèª
    Coverage: ä¸»è¦ãƒ•ãƒ­ãƒ¼100%
    
  End-to-End Tests (10%):
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼å…¨ä½“
    - ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆ
    - æœ¬ç•ªç’°å¢ƒç›¸å½“ãƒ†ã‚¹ãƒˆ
    Coverage: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹100%
```

#### ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«æ§‹æˆ
```yaml
Testing Stack:
  Unit Testing:
    Framework: Jest 29.x
    Mocking: jest.mock()
    Coverage: Jest built-in
    
  Integration Testing:
    Framework: Supertest (HTTP testing)
    Database: Test fixtures
    External APIs: Nock (HTTP mocking)
    
  E2E Testing:
    Framework: Playwright
    Browsers: Chromium, Firefox, Safari
    CI/CD: GitHub Actions

  Load Testing:
    Tool: Artillery.js
    Scenarios: SSE connections, API throughput
    Metrics: RPS, latency, memory usage
```

### 8.2 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```bash
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ larkBaseManager.test.js
â”‚   â”‚   â”œâ”€â”€ contentWorkflow.test.js
â”‚   â”‚   â””â”€â”€ sseManager.test.js
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ similarity.test.js
â”‚   â”‚   â””â”€â”€ validation.test.js
â”‚   â””â”€â”€ fixtures/
â”‚       â”œâ”€â”€ lark-responses.json
â”‚       â””â”€â”€ sample-content.json
```

#### ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
```javascript
// tests/unit/services/larkBaseManager.test.js
import { jest } from '@jest/globals';
import LarkBaseManager from '../../../src/services/larkBaseManager.js';

describe('LarkBaseManager', () => {
  let larkManager;
  let mockClient;

  beforeEach(() => {
    mockClient = {
      auth: {
        tenantAccessToken: {
          internal: jest.fn()
        }
      },
      bitable: {
        appTableRecord: {
          create: jest.fn(),
          list: jest.fn(),
          update: jest.fn()
        }
      }
    };
    
    larkManager = new LarkBaseManager();
    larkManager.client = mockClient;
  });

  describe('createArticleRecord', () => {
    it('æ–°è¦è¨˜äº‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ­£å¸¸ã«ä½œæˆã™ã‚‹', async () => {
      // Arrange
      const articleData = {
        title: 'ãƒ†ã‚¹ãƒˆè¨˜äº‹',
        category: 'AIæ´»ç”¨',
        status: 'æ–°è¦'
      };
      
      const expectedResponse = {
        code: 0,
        data: {
          record_id: 'rec_test123',
          fields: articleData
        }
      };
      
      mockClient.bitable.appTableRecord.create.mockResolvedValue(expectedResponse);

      // Act
      const result = await larkManager.createArticleRecord(articleData);

      // Assert
      expect(result).toEqual({
        recordId: 'rec_test123',
        fields: articleData
      });
      
      expect(mockClient.bitable.appTableRecord.create).toHaveBeenCalledWith({
        path: {
          app_token: process.env.LARK_BASE_APP_TOKEN,
          table_id: process.env.ARTICLES_TABLE_ID
        },
        data: {
          fields: articleData
        }
      });
    });

    it('APIã‚¨ãƒ©ãƒ¼æ™‚ã«é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹', async () => {
      // Arrange
      mockClient.bitable.appTableRecord.create.mockResolvedValue({
        code: 400,
        msg: 'Invalid field'
      });

      // Act & Assert
      await expect(
        larkManager.createArticleRecord({ title: 'test' })
      ).rejects.toThrow('Failed to create article record: Invalid field');
    });
  });
});

// tests/unit/utils/similarity.test.js
import { calculateSimilarity, analyzePlagiarism } from '../../../src/utils/similarity.js';

describe('Similarity Utils', () => {
  describe('calculateSimilarity', () => {
    it('å…¨ãåŒã˜ãƒ†ã‚­ã‚¹ãƒˆã¯100%ã®é¡ä¼¼åº¦ã‚’è¿”ã™', () => {
      const text = 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆã§ã™ã€‚';
      const similarity = calculateSimilarity(text, text);
      expect(similarity).toBe(100);
    });

    it('å®Œå…¨ã«ç•°ãªã‚‹ãƒ†ã‚­ã‚¹ãƒˆã¯ä½ã„é¡ä¼¼åº¦ã‚’è¿”ã™', () => {
      const text1 = 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦å­¦ç¿’ã™ã‚‹ã€‚';
      const text2 = 'æ–™ç†ã®ãƒ¬ã‚·ãƒ”ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚';
      const similarity = calculateSimilarity(text1, text2);
      expect(similarity).toBeLessThan(20);
    });

    it('éƒ¨åˆ†çš„ã«é¡ä¼¼ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã¯é©åº¦ãªé¡ä¼¼åº¦ã‚’è¿”ã™', () => {
      const text1 = 'Claude Codeã¯é–‹ç™ºåŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚';
      const text2 = 'Claude Codeã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§é–‹ç™ºé€Ÿåº¦ãŒå‘ä¸Šã—ã¾ã™ã€‚';
      const similarity = calculateSimilarity(text1, text2);
      expect(similarity).toBeGreaterThan(30);
      expect(similarity).toBeLessThan(70);
    });
  });

  describe('analyzePlagiarism', () => {
    it('é¡ä¼¼åº¦30ä»¥ä¸‹ã¯åˆæ ¼åˆ¤å®š', () => {
      const analysis = analyzePlagiarism(25);
      expect(analysis.status).toBe('passed');
      expect(analysis.action).toBe('proceed');
    });

    it('é¡ä¼¼åº¦70ä»¥ä¸Šã¯å±é™ºåˆ¤å®š', () => {
      const analysis = analyzePlagiarism(75);
      expect(analysis.status).toBe('critical');
      expect(analysis.action).toBe('rewrite');
    });
  });
});
```

### 8.3 çµ±åˆãƒ†ã‚¹ãƒˆ

```javascript
// tests/integration/workflow.test.js
import request from 'supertest';
import app from '../../src/server.js';
import nock from 'nock';

describe('Workflow Integration', () => {
  beforeEach(() => {
    // Lark API ãƒ¢ãƒƒã‚¯
    nock('https://open.larksuite.com')
      .post('/open-apis/auth/v3/tenant_access_token/internal/')
      .reply(200, {
        code: 0,
        tenant_access_token: 'test_token',
        expires_in: 7200
      });
      
    nock('https://open.larksuite.com')
      .post(/\/open-apis\/bitable\/v1\/apps\/.*\/tables\/.*\/records/)
      .reply(200, {
        code: 0,
        data: {
          record_id: 'rec_integration_test',
          fields: {}
        }
      });
  });

  afterEach(() => {
    nock.cleanAll();
  });

  it('å®Œå…¨ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã‚‹', async () => {
    // Step 1: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹
    const startResponse = await request(app)
      .post('/api/workflow/start')
      .send({
        topic: 'çµ±åˆãƒ†ã‚¹ãƒˆè¨˜äº‹',
        parameters: {
          style: 'professional',
          length: 'medium'
        }
      })
      .expect(200);

    const { workflowId } = startResponse.body;
    expect(workflowId).toBeDefined();

    // Step 2: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
    const statusResponse = await request(app)
      .get(`/api/workflow/${workflowId}/status`)
      .expect(200);

    expect(statusResponse.body.status).toBe('started');

    // Step 3: å®Œäº†ã¾ã§å¾…æ©Ÿ (å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã§ã¯é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š)
    await new Promise(resolve => setTimeout(resolve, 2000));

    // Step 4: æœ€çµ‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
    const finalStatus = await request(app)
      .get(`/api/workflow/${workflowId}/status`)
      .expect(200);

    expect(['completed', 'in_progress']).toContain(finalStatus.body.status);
  }, 30000); // 30ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

  it('SSEæ¥ç¶šãŒæ­£å¸¸ã«ç¢ºç«‹ã•ã‚Œã‚‹', (done) => {
    const EventSource = require('eventsource');
    const eventSource = new EventSource('http://localhost:3001/api/workflow/stream');

    let eventCount = 0;
    const expectedEvents = ['connected', 'heartbeat'];

    eventSource.onmessage = (event) => {
      const data = JSON.parse(event.data);
      expect(expectedEvents).toContain(data.type || event.type);
      
      eventCount++;
      if (eventCount >= 2) {
        eventSource.close();
        done();
      }
    };

    eventSource.onerror = (error) => {
      eventSource.close();
      done(error);
    };
  }, 10000);
});
```

### 8.4 E2Eãƒ†ã‚¹ãƒˆ

```javascript
// tests/e2e/user-workflow.spec.js
import { test, expect } from '@playwright/test';

test.describe('User Workflow E2E', () => {
  test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨˜äº‹ä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Œäº†ã§ãã‚‹', async ({ page }) => {
    // Step 1: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹
    await page.goto('http://localhost:3001');
    await expect(page).toHaveTitle(/Content Workflow/);

    // Step 2: SSEæ¥ç¶š
    await page.click('button:has-text("SSEæ¥ç¶š")');
    await expect(page.locator('#connection-status')).toContainText('æ¥ç¶šæ¸ˆã¿');

    // Step 3: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š
    await page.fill('#topic-input', 'E2Eãƒ†ã‚¹ãƒˆè¨˜äº‹: Claude Codeæ´»ç”¨æ³•');
    await page.selectOption('#style-select', 'professional');
    await page.selectOption('#length-select', 'medium');

    // Step 4: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹
    await page.click('button:has-text("ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹")');

    // Step 5: é€²æ—ç¢ºèª
    const progressBar = page.locator('#progress-bar');
    await expect(progressBar).toBeVisible();

    // Step 6: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ç¢ºèª
    const stageStatus = page.locator('#current-stage');
    await expect(stageStatus).toContainText('åˆæœŸåŒ–', { timeout: 5000 });
    await expect(stageStatus).toContainText('èª¿æŸ»', { timeout: 30000 });

    // Step 7: å®Œäº†ç¢ºèª
    await expect(stageStatus).toContainText('å®Œäº†', { timeout: 300000 }); // 5åˆ†

    // Step 8: Lark Baseãƒªãƒ³ã‚¯ç¢ºèª
    const larkLink = page.locator('a:has-text("Lark Baseã§è¡¨ç¤º")');
    await expect(larkLink).toBeVisible();
    await expect(larkLink).toHaveAttribute('href', /base\.larksuite\.com/);
  });

  test('ã‚¨ãƒ©ãƒ¼æ™‚ã®é©åˆ‡ãªè¡¨ç¤º', async ({ page }) => {
    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    await page.route('**/api/workflow/start', route => 
      route.fulfill({ status: 500, body: 'Server Error' })
    );

    await page.goto('http://localhost:3001');
    await page.click('button:has-text("SSEæ¥ç¶š")');
    
    await page.fill('#topic-input', 'ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ');
    await page.click('button:has-text("ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹")');

    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºèª
    const errorMessage = page.locator('.error-message');
    await expect(errorMessage).toBeVisible();
    await expect(errorMessage).toContainText('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
  });
});
```

### 8.5 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

```yaml
# tests/performance/load-test.yml
config:
  target: 'http://localhost:3001'
  phases:
    - duration: 60
      arrivalRate: 10
      name: "Warm up"
    - duration: 300  
      arrivalRate: 50
      name: "Normal load"
    - duration: 120
      arrivalRate: 100
      name: "High load"

scenarios:
  - name: "SSE Connection Load Test"
    weight: 40
    engine: "ws"
    flow:
      - connect:
          url: "/api/workflow/stream"
          headers:
            Accept: "text/event-stream"
      - think: 30
      - disconnect

  - name: "Workflow API Load Test"  
    weight: 60
    flow:
      - post:
          url: "/api/workflow/start"
          json:
            topic: "Load test article {{ $randomString() }}"
            parameters:
              style: "professional"
              length: "medium"
          capture:
            - json: "$.workflowId"
              as: "workflowId"
      
      - get:
          url: "/api/workflow/{{ workflowId }}/status"
          
      - think: 5

expectations:
  http_response_time:
    p95: 2000  # 95%ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ2ç§’ä»¥å†…
    p99: 5000  # 99%ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ5ç§’ä»¥å†…
  http_error_rate:
    lt: 1      # ã‚¨ãƒ©ãƒ¼ç‡1%æœªæº€
```

---

## 9. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 9.1 èªè¨¼ãƒ»èªå¯è¨­è¨ˆ

#### èªè¨¼ãƒ•ãƒ­ãƒ¼è©³ç´°
```mermaid
sequenceDiagram
    participant Client
    participant Server  
    participant Lark_Auth
    participant Lark_Base

    Client->>Server: Request with App Credentials
    Server->>Lark_Auth: Get Tenant Access Token
    Lark_Auth-->>Server: Tenant Token (2h TTL)
    Server->>Server: Cache Token with Refresh Logic
    Server->>Lark_Base: API Call with Token
    Lark_Base-->>Server: Data Response
    Server-->>Client: Processed Response
    
    Note over Server: Token Auto-Refresh
    Server->>Server: Check Token Expiry (every request)
    alt Token Expired
        Server->>Lark_Auth: Refresh Token
        Lark_Auth-->>Server: New Token
    end
```

#### æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
```yaml
Role-Based Access Control (RBAC):
  
  Roles Definition:
    admin:
      permissions: ["*"]
      description: "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã€å…¨æ©Ÿèƒ½ã‚¢ã‚¯ã‚»ã‚¹"
      users: ["system-admin@company.com"]
      
    editor:
      permissions: ["article:read", "article:write", "workflow:start", "seo:manage"]
      description: "ç·¨é›†è€…ã€è¨˜äº‹ç®¡ç†ãƒ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ"
      users: ["editor-*@company.com"]
      
    writer:
      permissions: ["article:read", "article:write:own", "workflow:view"]
      description: "ãƒ©ã‚¤ã‚¿ãƒ¼ã€è‡ªåˆ†ã®è¨˜äº‹ã®ã¿ç·¨é›†"
      users: ["writer-*@company.com"]
      
    viewer:
      permissions: ["article:read", "dashboard:view"]
      description: "é–²è¦§è€…ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»è¨˜äº‹é–²è¦§ã®ã¿"
      users: ["*@company.com"]

  Permission Format: "{resource}:{action}:{scope?}"
  Examples:
    - "article:read": å…¨è¨˜äº‹èª­ã¿å–ã‚Š
    - "article:write:own": è‡ªåˆ†ã®è¨˜äº‹ã®ã¿æ›¸ãè¾¼ã¿
    - "workflow:start": ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹
    - "seo:manage": SEOè¨­å®šç®¡ç†

  Implementation:
    ```javascript
    class PermissionManager {
      checkPermission(user, permission) {
        const userRole = this.getUserRole(user);
        const rolePermissions = this.getRolePermissions(userRole);
        
        return rolePermissions.some(p => 
          p === "*" || this.matchesPermission(p, permission)
        );
      }
      
      matchesPermission(granted, requested) {
        const grantedParts = granted.split(':');
        const requestedParts = requested.split(':');
        
        return grantedParts.every((part, index) => 
          part === "*" || part === requestedParts[index]
        );
      }
    }
    ```
```

### 9.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·

#### æš—å·åŒ–å®Ÿè£…
```yaml
Encryption Standards:
  
  Data at Rest:
    Algorithm: AES-256-GCM
    Key Management: ç’°å¢ƒå¤‰æ•° + HSM (æœ¬ç•ª)
    Scope: 
      - æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«
      - ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ« (å€‹äººæƒ…å ±å«ã‚€)
      - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿
    
    Implementation:
      ```javascript
      import crypto from 'crypto';
      
      class DataEncryption {
        constructor() {
          this.algorithm = 'aes-256-gcm';
          this.key = Buffer.from(process.env.ENCRYPTION_KEY, 'hex');
        }
        
        encrypt(text) {
          const iv = crypto.randomBytes(16);
          const cipher = crypto.createCipher(this.algorithm, this.key, iv);
          
          let encrypted = cipher.update(text, 'utf8', 'hex');
          encrypted += cipher.final('hex');
          
          const authTag = cipher.getAuthTag();
          
          return {
            iv: iv.toString('hex'),
            encryptedData: encrypted,
            authTag: authTag.toString('hex')
          };
        }
        
        decrypt(encryptedObj) {
          const decipher = crypto.createDecipher(
            this.algorithm, 
            this.key, 
            Buffer.from(encryptedObj.iv, 'hex')
          );
          
          decipher.setAuthTag(Buffer.from(encryptedObj.authTag, 'hex'));
          
          let decrypted = decipher.update(encryptedObj.encryptedData, 'hex', 'utf8');
          decrypted += decipher.final('utf8');
          
          return decrypted;
        }
      }
      ```

  Data in Transit:
    Protocol: TLS 1.3
    Certificate: Let's Encrypt (Auto-renewal)
    HSTS: max-age=31536000; includeSubDomains
    Certificate Pinning: Production environment
    
  Sensitive Data Handling:
    PII Masking:
      - Logs: Email â†’ e***@***.com
      - API Response: Phone â†’ ***-****-1234
      - Database: Hash + Salt for reversible data
    
    Data Classification:
      - Public: è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€SEOãƒ‡ãƒ¼ã‚¿
      - Internal: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š
      - Confidential: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã€API Key
      - Restricted: å€‹äººæƒ…å ±ã€èªè¨¼æƒ…å ±
```

#### ã‚»ã‚­ãƒ¥ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
```javascript
// âŒ æ‚ªã„ä¾‹ï¼šæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®å¹³æ–‡ãƒ­ã‚°å‡ºåŠ›
console.log('Lark API Response:', apiResponse);

// âœ… è‰¯ã„ä¾‹ï¼šæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ãƒã‚¹ã‚¯å‡¦ç†
console.log('Lark API Response:', this.maskSensitiveData(apiResponse));

// âŒ æ‚ªã„ä¾‹ï¼šSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³è„†å¼±æ€§
const query = `SELECT * FROM articles WHERE title = '${userInput}'`;

// âœ… è‰¯ã„ä¾‹ï¼šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªä½¿ç”¨
const query = 'SELECT * FROM articles WHERE title = ?';
db.query(query, [userInput]);

// âŒ æ‚ªã„ä¾‹ï¼šXSSè„†å¼±æ€§
res.send(`<h1>Welcome ${req.query.name}</h1>`);

// âœ… è‰¯ã„ä¾‹ï¼šå…¥åŠ›å€¤ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º
const sanitizedName = validator.escape(req.query.name);
res.send(`<h1>Welcome ${sanitizedName}</h1>`);

// æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãƒã‚¹ã‚¯é–¢æ•°
function maskSensitiveData(obj) {
  const sensitiveFields = ['token', 'secret', 'password', 'key'];
  const masked = { ...obj };
  
  Object.keys(masked).forEach(key => {
    if (sensitiveFields.some(field => key.toLowerCase().includes(field))) {
      const value = masked[key];
      if (typeof value === 'string' && value.length > 8) {
        masked[key] = value.substring(0, 4) + '*'.repeat(value.length - 8) + value.substring(value.length - 4);
      } else {
        masked[key] = '***MASKED***';
      }
    }
  });
  
  return masked;
}
```

### 9.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚°è¨­è¨ˆ
```yaml
Security Event Categories:
  
  Authentication Events:
    - LOGIN_SUCCESS: æˆåŠŸãƒ­ã‚°ã‚¤ãƒ³
    - LOGIN_FAILURE: å¤±æ•—ãƒ­ã‚°ã‚¤ãƒ³ 
    - TOKEN_REFRESH: ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°
    - UNAUTHORIZED_ACCESS: èªè¨¼ã‚¨ãƒ©ãƒ¼
    
  Authorization Events:
    - PERMISSION_DENIED: æ¨©é™ä¸è¶³
    - ROLE_ESCALATION: æ¨©é™æ˜‡æ ¼è©¦è¡Œ
    - RESOURCE_ACCESS: ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹
    
  Data Access Events:
    - RECORD_READ: ãƒ¬ã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Š
    - RECORD_WRITE: ãƒ¬ã‚³ãƒ¼ãƒ‰æ›¸ãè¾¼ã¿
    - BULK_OPERATION: ä¸€æ‹¬æ“ä½œ
    - DATA_EXPORT: ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    
  System Events:
    - CONFIG_CHANGE: è¨­å®šå¤‰æ›´
    - ADMIN_ACTION: ç®¡ç†è€…æ“ä½œ
    - SUSPICIOUS_ACTIVITY: ç•°å¸¸ãªæ´»å‹•

Log Format (JSON):
  ```json
  {
    "timestamp": "2025-08-11T09:00:00.000Z",
    "eventType": "UNAUTHORIZED_ACCESS",
    "severity": "HIGH",
    "source": "api-server",
    "user": {
      "id": "unknown",
      "ip": "192.168.1.100",
      "userAgent": "Mozilla/5.0..."
    },
    "resource": {
      "endpoint": "/api/lark/records",
      "method": "POST",
      "tableId": "tbl6Lcel9u6C1N3A"
    },
    "details": {
      "error": "Invalid token",
      "attempts": 3,
      "blocked": true
    },
    "correlation": {
      "requestId": "req_xyz789",
      "sessionId": "ses_abc123"
    }
  }
  ```
```

#### ç•°å¸¸æ¤œçŸ¥ãƒ«ãƒ¼ãƒ«
```yaml
Anomaly Detection Rules:
  
  Brute Force Detection:
    Pattern: "5+ failed login attempts from same IP in 5 minutes"
    Action: 
      - Block IP for 1 hour
      - Send alert to security team
      - Log to security incident system
      
  Privilege Escalation Detection:
    Pattern: "User attempting to access resources above their role"
    Action:
      - Deny request
      - Alert security team immediately
      - Require administrator review
      
  Suspicious Data Access:
    Pattern: "Bulk data access outside normal hours"
    Threshold: "> 100 records accessed between 22:00-06:00"
    Action:
      - Flag for review
      - Notify data owner
      - Require justification
      
  API Abuse Detection:
    Pattern: "High request rate from single source"
    Threshold: "> 200 requests/minute from same IP"
    Action:
      - Apply rate limiting
      - Temporary IP blocking
      - Monitor for escalation

Implementation:
  ```javascript
  class SecurityMonitor {
    constructor() {
      this.eventBuffer = new Map(); // IP -> events[]
      this.blockedIPs = new Set();
    }
    
    checkBruteForce(ip, eventType) {
      const now = Date.now();
      const timeWindow = 5 * 60 * 1000; // 5 minutes
      
      if (!this.eventBuffer.has(ip)) {
        this.eventBuffer.set(ip, []);
      }
      
      const events = this.eventBuffer.get(ip);
      // Remove old events
      const recentEvents = events.filter(e => now - e.timestamp < timeWindow);
      
      if (eventType === 'LOGIN_FAILURE') {
        recentEvents.push({ timestamp: now, type: eventType });
        this.eventBuffer.set(ip, recentEvents);
        
        const failureCount = recentEvents.filter(e => e.type === 'LOGIN_FAILURE').length;
        
        if (failureCount >= 5) {
          this.blockIP(ip, '1h');
          this.sendSecurityAlert('BRUTE_FORCE_DETECTED', { ip, attempts: failureCount });
          return true; // Blocked
        }
      }
      
      return false; // Not blocked
    }
    
    blockIP(ip, duration) {
      this.blockedIPs.add(ip);
      setTimeout(() => this.blockedIPs.delete(ip), this.parseDuration(duration));
    }
  }
  ```
```

---

## 10. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### 10.1 æ€§èƒ½è¦ä»¶å®šç¾©

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ç›®æ¨™
```yaml
Performance Targets:
  
  API Response Times:
    Health Check (GET /health):
      Target: < 50ms
      Acceptable: < 100ms
      Critical: > 200ms
      
    Workflow Start (POST /api/workflow/start):
      Target: < 500ms
      Acceptable: < 1000ms  
      Critical: > 2000ms
      
    Record Operations:
      GET /api/lark/records: < 300ms
      POST /api/lark/records: < 800ms
      PUT /api/lark/records/:id: < 500ms
      
    SSE Stream (GET /api/workflow/stream):
      Connection Establishment: < 100ms
      Event Delivery Latency: < 50ms
      Heartbeat Interval: 30s
      
  Workflow Performance:
    Total Duration:
      Short Article (< 2000å­—): 10-15åˆ†
      Medium Article (2000-5000å­—): 15-25åˆ†  
      Long Article (> 5000å­—): 25-40åˆ†
      
    Stage Performance:
      åˆæœŸåŒ–: < 30ç§’
      èª¿æŸ»: 3-8åˆ†
      æ§‹æˆ: 2-5åˆ†
      ç”Ÿæˆ: 5-15åˆ† (å†…å®¹é‡ä¾å­˜)
      ãƒ¬ãƒ“ãƒ¥ãƒ¼: 2-4åˆ†
      æœ€çµ‚åŒ–: 1-3åˆ†
      
  Concurrent Performance:
    SSE Connections: 100 concurrent (target)
    Active Workflows: 10 parallel (target)
    API Throughput: 500 requests/minute
```

#### ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™
```yaml
Resource Limits:
  
  Production Environment:
    CPU: 2 vCPUs (4 cores preferred)
    Memory: 2GB RAM (4GB preferred)
    Storage: 20GB SSD (50GB preferred)
    Network: 1Gbps (unlimited bandwidth)
    
  Resource Usage Targets:
    CPU Usage: < 70% average, < 90% peak
    Memory Usage: < 80% average, < 90% peak
    Disk I/O: < 80% capacity
    Network I/O: < 500MB/s sustained
    
  Scaling Triggers:
    CPU > 80% for 5 minutes â†’ Scale up
    Memory > 85% for 3 minutes â†’ Scale up
    Active connections > 80 â†’ Scale horizontally
    Queue length > 20 workflows â†’ Add workers
```

### 10.2 æ€§èƒ½æœ€é©åŒ–æˆ¦ç•¥

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ€é©åŒ–
```javascript
// 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæœ€é©åŒ–
class OptimizedLarkBaseManager {
  constructor() {
    this.queryCache = new Map();
    this.batchSize = 50; // Lark APIæ¨å¥¨ãƒãƒƒãƒã‚µã‚¤ã‚º
  }
  
  // ãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚‹åŠ¹ç‡åŒ–
  async batchCreateRecords(records) {
    const batches = this.chunkArray(records, this.batchSize);
    const results = [];
    
    for (const batch of batches) {
      const batchResult = await this.client.bitable.appTableRecord.batch_create({
        path: { app_token: this.appToken, table_id: this.tableId },
        data: { records: batch }
      });
      
      results.push(...batchResult.data.records);
      
      // ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ: ãƒãƒƒãƒé–“ã§200mså¾…æ©Ÿ
      await this.delay(200);
    }
    
    return results;
  }
  
  // ã‚¯ã‚¨ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
  async getCachedRecords(filter, ttl = 300000) { // 5åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    const cacheKey = JSON.stringify(filter);
    const cached = this.queryCache.get(cacheKey);
    
    if (cached && Date.now() - cached.timestamp < ttl) {
      return cached.data;
    }
    
    const data = await this.getRecords(filter);
    this.queryCache.set(cacheKey, {
      data,
      timestamp: Date.now()
    });
    
    return data;
  }
  
  // å¿…è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿å–å¾—
  async getRecordsOptimized(filter, fields = []) {
    const params = {
      filter,
      page_size: 100
    };
    
    // å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿æŒ‡å®š
    if (fields.length > 0) {
      params.field_names = JSON.stringify(fields);
    }
    
    const response = await this.client.bitable.appTableRecord.list({
      path: { app_token: this.appToken, table_id: this.tableId },
      params
    });
    
    return response.data.items;
  }
}

// 2. SSEæ¥ç¶šã®åŠ¹ç‡åŒ–
class OptimizedSSEManager {
  constructor() {
    this.connections = new Map(); // connectionId -> response object
    this.eventQueue = []; // ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼
    this.batchSize = 10; // ãƒãƒƒãƒé€ä¿¡ã‚µã‚¤ã‚º
    this.batchInterval = 100; // 100msé–“éš”ã§ãƒãƒƒãƒé€ä¿¡
    
    this.startBatchProcessor();
  }
  
  // ãƒãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
  startBatchProcessor() {
    setInterval(() => {
      if (this.eventQueue.length === 0) return;
      
      const batch = this.eventQueue.splice(0, this.batchSize);
      const groupedEvents = this.groupEventsByConnection(batch);
      
      groupedEvents.forEach((events, connectionId) => {
        const connection = this.connections.get(connectionId);
        if (connection && !connection.destroyed) {
          this.sendBatchedEvents(connection, events);
        }
      });
    }, this.batchInterval);
  }
  
  // ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒƒãƒé€ä¿¡
  sendBatchedEvents(res, events) {
    const batchedData = {
      type: 'batch',
      events: events,
      timestamp: new Date().toISOString()
    };
    
    try {
      res.write(`event: batch\ndata: ${JSON.stringify(batchedData)}\n\n`);
    } catch (error) {
      console.error('Failed to send batched events:', error);
      this.removeConnection(res);
    }
  }
  
  // ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
  cleanupInactiveConnections() {
    const now = Date.now();
    const timeout = 5 * 60 * 1000; // 5åˆ†
    
    this.connections.forEach((connection, id) => {
      if (now - connection.lastActivity > timeout) {
        connection.res.end();
        this.connections.delete(id);
      }
    });
  }
}

// 3. ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢
class WorkflowProcessor {
  constructor() {
    this.workers = [];
    this.maxWorkers = process.env.MAX_WORKERS || 4;
    this.taskQueue = [];
    
    this.initializeWorkers();
  }
  
  initializeWorkers() {
    for (let i = 0; i < this.maxWorkers; i++) {
      const worker = new Worker('./src/workers/content-worker.js');
      worker.on('message', this.handleWorkerMessage.bind(this));
      worker.on('error', this.handleWorkerError.bind(this));
      
      this.workers.push({
        instance: worker,
        busy: false,
        id: i
      });
    }
  }
  
  async processWorkflow(workflowData) {
    return new Promise((resolve, reject) => {
      const availableWorker = this.workers.find(w => !w.busy);
      
      if (!availableWorker) {
        // å…¨ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒå¿™ã—ã„å ´åˆã¯ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ 
        this.taskQueue.push({ workflowData, resolve, reject });
        return;
      }
      
      availableWorker.busy = true;
      availableWorker.instance.postMessage({
        type: 'START_WORKFLOW',
        data: workflowData,
        id: Date.now()
      });
      
      // ãƒ¯ãƒ¼ã‚«ãƒ¼ã‹ã‚‰ã®å¿œç­”å¾…æ©Ÿ
      const messageHandler = (message) => {
        if (message.type === 'WORKFLOW_COMPLETE') {
          availableWorker.busy = false;
          availableWorker.instance.off('message', messageHandler);
          resolve(message.result);
          
          // ã‚­ãƒ¥ãƒ¼ã«å¾…æ©Ÿä¸­ã®ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Œã°å‡¦ç†
          if (this.taskQueue.length > 0) {
            const nextTask = this.taskQueue.shift();
            this.processWorkflow(nextTask.workflowData)
              .then(nextTask.resolve)
              .catch(nextTask.reject);
          }
        }
      };
      
      availableWorker.instance.on('message', messageHandler);
    });
  }
}
```

#### ã‚¤ãƒ³ãƒ•ãƒ©æœ€é©åŒ–
```yaml
Infrastructure Optimization:
  
  1. CDN Configuration:
    Provider: Cloudflare
    Cache Rules:
      - Static Assets: 30 days TTL
      - API Responses (cacheable): 5 minutes TTL
      - HTML Pages: 1 hour TTL
    Compression: Brotli + Gzip
    Minification: HTML, CSS, JS
    
  2. Database Optimization:
    Connection Pooling:
      Min Connections: 5
      Max Connections: 20
      Idle Timeout: 300 seconds
      
    Query Optimization:
      - Index creation on frequently queried fields
      - Prepared statements for repeated queries
      - Connection reuse
      
    Caching Strategy:
      L1 Cache: Application memory (Node.js Map)
      L2 Cache: Redis (distributed cache)
      L3 Cache: CDN (static content)
      
  3. Load Balancing:
    Algorithm: Round Robin with health checks
    Health Check: GET /health every 30 seconds
    Failover: Auto-remove unhealthy instances
    Session Affinity: IP Hash for SSE connections
    
  4. Auto Scaling:
    Metrics:
      - CPU > 75% for 3 minutes â†’ Scale up
      - Memory > 80% for 2 minutes â†’ Scale up  
      - Request rate > 400/min â†’ Scale up
      - Queue depth > 15 workflows â†’ Scale up
      
    Scaling Policy:
      Min Instances: 2
      Max Instances: 10
      Scale Up: +1 instance
      Scale Down: -1 instance (gradual)
      Cool Down: 5 minutes
```

### 10.3 ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```yaml
Monitoring Stack:
  
  Application Performance Monitoring (APM):
    Tool: New Relic / Datadog / è‡ªè£½ç›£è¦–
    Metrics:
      - Response time percentiles (P50, P95, P99)
      - Throughput (requests/second)
      - Error rate
      - Apdex score
      
  System Monitoring:
    Tool: Prometheus + Grafana
    Metrics:
      - CPU usage
      - Memory usage  
      - Disk I/O
      - Network I/O
      - Process count
      
  Business Metrics:
    Custom Dashboard:
      - Workflow completion rate
      - Average workflow duration
      - User satisfaction score
      - Content quality metrics
      
  Real-time Alerting:
    Channels: Lark, Email, SMS
    Thresholds:
      - Response time P95 > 2s â†’ Warning
      - Error rate > 1% â†’ Warning
      - Error rate > 5% â†’ Critical
      - CPU > 90% â†’ Critical
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–
```javascript
// tests/performance/benchmark.js
import { performance } from 'perf_hooks';
import EventSource from 'eventsource';

class PerformanceBenchmark {
  constructor() {
    this.results = {};
  }
  
  async benchmarkAPIResponse() {
    const iterations = 100;
    const responses = [];
    
    console.log(`Running ${iterations} API response tests...`);
    
    for (let i = 0; i < iterations; i++) {
      const start = performance.now();
      
      try {
        const response = await fetch('http://localhost:3001/api/lark/records');
        const end = performance.now();
        const duration = end - start;
        
        responses.push({
          iteration: i + 1,
          duration: duration,
          status: response.status,
          success: response.ok
        });
      } catch (error) {
        responses.push({
          iteration: i + 1,
          duration: null,
          status: null,
          success: false,
          error: error.message
        });
      }
    }
    
    // çµ±è¨ˆè¨ˆç®—
    const successfulRequests = responses.filter(r => r.success);
    const durations = successfulRequests.map(r => r.duration);
    
    durations.sort((a, b) => a - b);
    
    this.results.apiResponse = {
      totalRequests: iterations,
      successfulRequests: successfulRequests.length,
      errorRate: ((iterations - successfulRequests.length) / iterations * 100).toFixed(2) + '%',
      averageTime: (durations.reduce((a, b) => a + b, 0) / durations.length).toFixed(2) + 'ms',
      medianTime: durations[Math.floor(durations.length / 2)].toFixed(2) + 'ms',
      p95Time: durations[Math.floor(durations.length * 0.95)].toFixed(2) + 'ms',
      p99Time: durations[Math.floor(durations.length * 0.99)].toFixed(2) + 'ms',
      minTime: Math.min(...durations).toFixed(2) + 'ms',
      maxTime: Math.max(...durations).toFixed(2) + 'ms'
    };
    
    return this.results.apiResponse;
  }
  
  async benchmarkSSEConnections() {
    const concurrentConnections = 50;
    const testDuration = 60000; // 60ç§’
    const connections = [];
    const metrics = {
      connectionsEstablished: 0,
      connectionsDropped: 0,
      eventsReceived: 0,
      connectionErrors: 0
    };
    
    console.log(`Testing ${concurrentConnections} concurrent SSE connections for ${testDuration/1000}s...`);
    
    // ä¸¦è¡Œæ¥ç¶šä½œæˆ
    for (let i = 0; i < concurrentConnections; i++) {
      const eventSource = new EventSource('http://localhost:3001/api/workflow/stream');
      
      eventSource.onopen = () => {
        metrics.connectionsEstablished++;
      };
      
      eventSource.onmessage = (event) => {
        metrics.eventsReceived++;
      };
      
      eventSource.onerror = (error) => {
        metrics.connectionErrors++;
      };
      
      connections.push(eventSource);
    }
    
    // æŒ‡å®šæ™‚é–“å¾Œã«å…¨æ¥ç¶šã‚’é–‰ã˜ã‚‹
    await new Promise(resolve => {
      setTimeout(() => {
        connections.forEach(conn => {
          try {
            conn.close();
          } catch (error) {
            metrics.connectionsDropped++;
          }
        });
        resolve();
      }, testDuration);
    });
    
    this.results.sseConnections = {
      concurrentConnections,
      testDurationSeconds: testDuration / 1000,
      connectionsEstablished: metrics.connectionsEstablished,
      connectionsDropped: metrics.connectionsDropped,
      connectionErrors: metrics.connectionErrors,
      eventsReceived: metrics.eventsReceived,
      connectionSuccessRate: ((metrics.connectionsEstablished / concurrentConnections) * 100).toFixed(2) + '%',
      averageEventsPerConnection: (metrics.eventsReceived / metrics.connectionsEstablished).toFixed(2)
    };
    
    return this.results.sseConnections;
  }
  
  generateReport() {
    console.log('\n========================================');
    console.log('     PERFORMANCE BENCHMARK REPORT');
    console.log('========================================\n');
    
    if (this.results.apiResponse) {
      console.log('ğŸ“Š API Response Performance:');
      console.log(`   Total Requests: ${this.results.apiResponse.totalRequests}`);
      console.log(`   Success Rate: ${100 - parseFloat(this.results.apiResponse.errorRate)}%`);
      console.log(`   Average Time: ${this.results.apiResponse.averageTime}`);
      console.log(`   95th Percentile: ${this.results.apiResponse.p95Time}`);
      console.log(`   99th Percentile: ${this.results.apiResponse.p99Time}`);
      console.log('');
    }
    
    if (this.results.sseConnections) {
      console.log('ğŸ”Œ SSE Connection Performance:');
      console.log(`   Concurrent Connections: ${this.results.sseConnections.concurrentConnections}`);
      console.log(`   Connection Success Rate: ${this.results.sseConnections.connectionSuccessRate}`);
      console.log(`   Events Received: ${this.results.sseConnections.eventsReceived}`);
      console.log(`   Avg Events/Connection: ${this.results.sseConnections.averageEventsPerConnection}`);
      console.log('');
    }
    
    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ¤å®š
    console.log('ğŸ¯ Performance Assessment:');
    
    if (this.results.apiResponse) {
      const p95 = parseFloat(this.results.apiResponse.p95Time);
      if (p95 < 500) {
        console.log('   API Response: âœ… EXCELLENT (<500ms)');
      } else if (p95 < 1000) {
        console.log('   API Response: âœ… GOOD (<1000ms)');
      } else if (p95 < 2000) {
        console.log('   API Response: âš ï¸  ACCEPTABLE (<2000ms)');
      } else {
        console.log('   API Response: âŒ NEEDS IMPROVEMENT (>2000ms)');
      }
    }
    
    if (this.results.sseConnections) {
      const successRate = parseFloat(this.results.sseConnections.connectionSuccessRate);
      if (successRate > 95) {
        console.log('   SSE Connections: âœ… EXCELLENT (>95%)');
      } else if (successRate > 90) {
        console.log('   SSE Connections: âœ… GOOD (>90%)');
      } else if (successRate > 80) {
        console.log('   SSE Connections: âš ï¸  ACCEPTABLE (>80%)');
      } else {
        console.log('   SSE Connections: âŒ NEEDS IMPROVEMENT (<80%)');
      }
    }
    
    console.log('\n========================================');
  }
}

// ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ
async function runBenchmark() {
  const benchmark = new PerformanceBenchmark();
  
  try {
    await benchmark.benchmarkAPIResponse();
    await benchmark.benchmarkSSEConnections();
    benchmark.generateReport();
  } catch (error) {
    console.error('Benchmark failed:', error);
  }
}

// CLIå®Ÿè¡Œ
if (process.argv.includes('--run')) {
  runBenchmark();
}

export { PerformanceBenchmark, runBenchmark };
```

---

## ğŸ“„ ä»˜éŒ²ãƒ»å‚è€ƒè³‡æ–™

### A. æŠ€è¡“å‚è€ƒè³‡æ–™
- [Lark Open Platform Documentation](https://open.larksuite.com/document/)
- [Node.js Performance Best Practices](https://nodejs.org/en/docs/guides/simple-profiling)
- [Server-Sent Events Specification](https://html.spec.whatwg.org/multipage/server-sent-events.html)

### B. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- `.env.example`: ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- `nginx.conf.example`: ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·è¨­å®š
- `docker-compose.yml`: ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™ºç’°å¢ƒ

### C. é‹ç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- Daily Operations Checklist
- Weekly Maintenance Tasks  
- Incident Response Procedures
- Disaster Recovery Plan

---

**ğŸ“ ã‚µãƒãƒ¼ãƒˆé€£çµ¡å…ˆ**
- é–‹ç™ºãƒãƒ¼ãƒ : dev-team@company.com
- é‹ç”¨ãƒãƒ¼ãƒ : ops-team@company.com
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ : security@company.com

**ğŸ“ æ–‡æ›¸ç®¡ç†**
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0
- æœ€çµ‚æ›´æ–°: 2025-08-11
- æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š: 2025-09-11
- æ‰¿èªè€…: ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼

---

Â© 2025 Ambitious AI - All Rights Reserved  
*ã“ã®æ–‡æ›¸ã¯æ©Ÿå¯†æƒ…å ±ã‚’å«ã¿ã¾ã™ã€‚ç¤¾å¤–ã¸ã®é…å¸ƒã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚*