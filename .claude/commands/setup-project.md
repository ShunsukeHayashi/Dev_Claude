# /setup-project

Initialize YAML Context Engineering project structure.

## Usage

```
/setup-project [project-name]
```

## Arguments

- `project-name` - Name of the project to initialize (optional, defaults to current directory name)

## Description

This command sets up a complete YAML Context Engineering project with:

1. Directory structure for context extraction
2. Configuration files
3. MCP server integration
4. Claude Code hooks and settings
5. GitHub Actions workflows
6. Documentation templates

## Project Structure

```
project-name/
├── .claude/
│   ├── settings.json
│   ├── commands/
│   └── agents/
├── mcp-server/
│   ├── src/
│   ├── tests/
│   └── requirements.txt
├── generated_contexts/
│   └── .gitkeep
├── .github/
│   └── workflows/
│       ├── context-extraction.yml
│       └── auto-review.yml
├── docs/
│   ├── README.md
│   └── guides/
├── PLANNING.md
└── .gitignore
```

## Implementation

When invoked with `$ARGUMENTS`, the command will execute:

### Step 1: Parse Project Name
```javascript
const projectName = "$ARGUMENTS".trim() || "yaml-context-project";
const projectPath = `./${projectName}`;

console.log("🚀 YAML Context Engineering プロジェクトをセットアップします");
console.log(`📁 プロジェクト名: ${projectName}`);
console.log(`📍 場所: ${projectPath}`);
```

### Step 2: Create Directory Structure
```bash
# プロジェクトディレクトリ作成
mkdir -p $PROJECT_NAME/{.claude/{commands,agents,logs},mcp-server/{src,tests},generated_contexts/{logs/{tasks,system,metrics,feedback}},docs/guides,.github/workflows}
```

### Step 3: Create Configuration Files

#### .claude/settings.json
```
Write $PROJECT_NAME/.claude/settings.json '{
  "name": "$PROJECT_NAME",
  "version": "1.0.0",
  "description": "YAML Context Engineering project",
  "mcp": {
    "server": {
      "command": "python3.11",
      "args": ["-m", "yaml_context_engineering.main"],
      "cwd": "../mcp-server"
    }
  }
}'
```

#### config.yaml
```
Write $PROJECT_NAME/config.yaml 'name: $PROJECT_NAME
version: 1.0.0
output_directory: ./generated_contexts
default_granularity: L1_L2
default_summarization: detailed
enable_ldd: true
ldd_config:
  logs_dir: ./generated_contexts/logs
  memory_bank_path: ./generated_contexts/@memory-bank.md
  enable_auto_logging: true'
```

### Step 4: Initialize LDD System
```
Write $PROJECT_NAME/generated_contexts/@memory-bank.md '# 📚 Memory Bank - $PROJECT_NAME

## Overview
このファイルは、$PROJECT_NAME プロジェクトの知識とパターンを蓄積します。

## Extraction Patterns
<!-- 成功した抽出パターンをここに記録 -->

## Learnings
<!-- プロジェクトから得られた学習内容 -->

## Best Practices
<!-- ベストプラクティスと推奨事項 -->

---
*Generated by YAML Context Engineering Agent*'
```

### Step 5: Create README
```
Write $PROJECT_NAME/README.md '# $PROJECT_NAME

YAML Context Engineering プロジェクト

## 🚀 クイックスタート

### URLからコンテキスト抽出
\`\`\`
/extract-context https://example.com
\`\`\`

### ローカルファイルの分析
\`\`\`
/analyze-structure docs/*.md
\`\`\`

### 専門エージェントの生成
\`\`\`
/generate-agent api-documentation
\`\`\`

## 📁 プロジェクト構造

- \`generated_contexts/\` - 抽出されたコンテキスト
- \`.claude/\` - Claude Code設定
- \`config.yaml\` - プロジェクト設定
- \`@memory-bank.md\` - LDD知識ベース

## 🛠 設定

設定は \`config.yaml\` で管理されています:
- \`default_granularity\`: 階層抽出レベル
- \`enable_ldd\`: LDDシステムの有効化

## 📊 生成ファイル

すべての抽出されたコンテキストは \`generated_contexts/\` に保存され、
YAML frontmatterと階層的に整理されたコンテンツを含みます。

---
*Powered by YAML Context Engineering Agent*'
```

### Step 6: Create Sample Files
```
Write $PROJECT_NAME/docs/guides/getting-started.md '# Getting Started

## 最初のコンテキスト抽出

1. URLを指定してコマンドを実行:
   \`\`\`
   /extract-context https://docs.example.com
   \`\`\`

2. 生成されたファイルを確認:
   \`\`\`
   ls generated_contexts/
   \`\`\`

3. インデックスを参照:
   \`\`\`
   open generated_contexts/index.md
   \`\`\`'
```

### Step 7: Initialize Git Repository
```bash
cd $PROJECT_NAME && git init
echo "generated_contexts/" > .gitignore
echo "*.log" >> .gitignore
echo ".DS_Store" >> .gitignore
echo "__pycache__/" >> .gitignore
echo "*.pyc" >> .gitignore
git add -A
git commit -m "Initial commit: YAML Context Engineering project setup"
```

### Step 8: Create GitHub Actions Workflow
```
Write $PROJECT_NAME/.github/workflows/context-extraction.yml 'name: Context Extraction

on:
  issues:
    types: [opened, edited]
  pull_request:
    types: [opened, synchronize]

jobs:
  extract:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Extract context from issue/PR
        uses: anthropics/claude-code-action@beta
        with:
          prompt: |
            Extract hierarchical context from the issue/PR description
            using the YAML Context Engineering tools.
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}'
```

## Expected Output

プロジェクトが正常にセットアップされると:

```
✅ プロジェクトのセットアップが完了しました！
📁 場所: ./yaml-context-project
📝 README.md が作成されました
⚙️  設定ファイルが生成されました
🧠 LDDシステムが初期化されました
🔧 Git リポジトリが初期化されました
🚀 すぐに使用を開始できます！

次のステップ:
1. cd yaml-context-project
2. /extract-context https://example.com
```